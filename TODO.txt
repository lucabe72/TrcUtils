pest / period_detect has no memleaks, but a lot of memory is left allocated
and reachable... Fix it!
This is an example of valgrind output:
==23878== Memcheck, a memory error detector
==23878== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==23878== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==23878== Command: ./pest test-p.int -P 500000
==23878== 
==23878== 
==23878== HEAP SUMMARY:
==23878==     in use at exit: 306,920 bytes in 369 blocks
==23878==   total heap usage: 47,837 allocs, 47,468 frees, 21,086,264 bytes allocated
==23878== 
==23878== 8 bytes in 1 blocks are still reachable in loss record 1 of 11
==23878==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==23878==    by 0x804A0E5: taskset_init (tasks.c:20)
==23878==    by 0x804996D: trace_read_event (trace_evt_handle.c:30)
==23878==    by 0x8048B15: main (pest.c:73)
==23878== 
==23878== 8 bytes in 1 blocks are still reachable in loss record 2 of 11
==23878==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==23878==    by 0x804A0E5: taskset_init (tasks.c:20)
==23878==    by 0x8049CB2: task_name_init (task_names.c:14)
==23878==    by 0x8049CCD: task_name_check (task_names.c:20)
==23878==    by 0x8049D13: name_get (task_names.c:32)
==23878==    by 0x8049A9E: trace_read_event (trace_evt_handle.c:71)
==23878==    by 0x8048B15: main (pest.c:73)
==23878== 
==23878== 8 bytes in 1 blocks are still reachable in loss record 3 of 11
==23878==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==23878==    by 0x804A0E5: taskset_init (tasks.c:20)
==23878==    by 0x80493D5: pdetect_event_handle (period_detect.c:188)
==23878==    by 0x8048B2A: main (pest.c:77)
==23878== 
==23878== 352 bytes in 1 blocks are still reachable in loss record 4 of 11
==23878==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==23878==    by 0x40E8D17: __fopen_internal (iofopen.c:76)
==23878==    by 0x409C4D2: (below main) (libc-start.c:226)
==23878== 
==23878== 876 bytes in 1 blocks are still reachable in loss record 5 of 11
==23878==    at 0x402BF52: realloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==23878==    by 0x804A140: taskset_add_task (tasks.c:35)
==23878==    by 0x8048CE0: task_new (period_detect.c:31)
==23878==    by 0x8049412: pdetect_event_handle (period_detect.c:193)
==23878==    by 0x8048B2A: main (pest.c:77)
==23878== 
==23878== 876 bytes in 73 blocks are still reachable in loss record 6 of 11
==23878==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==23878==    by 0x8048C9D: task_new (period_detect.c:28)
==23878==    by 0x8049412: pdetect_event_handle (period_detect.c:193)
==23878==    by 0x8048B2A: main (pest.c:77)
==23878== 
==23878== 1,296 bytes in 1 blocks are still reachable in loss record 7 of 11
==23878==    at 0x402BF52: realloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==23878==    by 0x804A140: taskset_add_task (tasks.c:35)
==23878==    by 0x8049B5F: trace_read_event (trace_evt_handle.c:88)
==23878==    by 0x8048B15: main (pest.c:73)
==23878== 
==23878== 1,296 bytes in 1 blocks are still reachable in loss record 8 of 11
==23878==    at 0x402BF52: realloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==23878==    by 0x804A140: taskset_add_task (tasks.c:35)
==23878==    by 0x8049D06: name_register (task_names.c:27)
==23878==    by 0x8049B19: trace_read_event (trace_evt_handle.c:82)
==23878==    by 0x8048B15: main (pest.c:73)
==23878== 
==23878== 1,596 bytes in 108 blocks are still reachable in loss record 9 of 11
==23878==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==23878==    by 0x8049EE5: task_name (trace_read.c:58)
==23878==    by 0x8049B3D: trace_read_event (trace_evt_handle.c:88)
==23878==    by 0x8048B15: main (pest.c:73)
==23878== 
==23878== 1,596 bytes in 108 blocks are still reachable in loss record 10 of 11
==23878==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==23878==    by 0x4100AF0: strdup (strdup.c:43)
==23878==    by 0x8049B19: trace_read_event (trace_evt_handle.c:82)
==23878==    by 0x8048B15: main (pest.c:73)
==23878== 
==23878== 299,008 bytes in 73 blocks are still reachable in loss record 11 of 11
==23878==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==23878==    by 0x402C007: realloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==23878==    by 0x8049462: pdetect_event_handle (period_detect.c:201)
==23878==    by 0x8048B2A: main (pest.c:77)
==23878== 
==23878== LEAK SUMMARY:
==23878==    definitely lost: 0 bytes in 0 blocks
==23878==    indirectly lost: 0 bytes in 0 blocks
==23878==      possibly lost: 0 bytes in 0 blocks
==23878==    still reachable: 306,920 bytes in 369 blocks
==23878==         suppressed: 0 bytes in 0 blocks
==23878== 
==23878== For counts of detected and suppressed errors, rerun with: -v
==23878== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)



